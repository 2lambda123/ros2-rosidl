#!/usr/bin/env python3

import os
import sys

def gencpp_srv(pkg, msg, header, outfile):
    pkgupper = pkg.upper()
    msgupper = msg.upper()
    output = "#ifndef %s__%s_H\n#define %s__%s_H\n\n" % (pkgupper, msgupper, pkgupper, msgupper)
    output += "#include <%s/srv/%s.hpp>\n" % (pkg, header)
    output += "#include <%s/srv/%s.hpp>\n" % (pkg, header)
    output += "\nnamespace %s\n{\n\n" % pkg
    output += '''
class %s
{
public:
  typedef %s::srv::%s_Request  Request;
  typedef %s::srv::%s_Response Response;

  Request  request;
  Response response;
};

}

#endif'''%(msg, pkg, msg, pkg, msg)
    outf = open(outfile, 'w')
    outf.write(output)
    outf.close()
    #include <%s/%s_Request.h>
    #include <%s/%s_Response.h>

if __name__ == '__main__':
    print("HELLO I AM GENCPP_SRV AND I AM AWESOME")
    if len(sys.argv) != 5:
        print('Expected exactly four arguments')
        sys.exit(1)
    print("gencpp_srv working on %s" % sys.argv[2])
    gencpp_srv(sys.argv[1], sys.argv[2], sys.argv[3], sys.argv[4])

