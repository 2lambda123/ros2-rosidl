#!/usr/bin/env python3

import os
import sys

def gencpp(pkg, msg, outfile):
    pkgupper = pkg.upper()
    msgupper = msg.upper()
    msglower = msg.lower()
    output = '''#ifndef %s__%s_H
#define %s__%s_H

#include <%s/msg/%s.hpp>

namespace %s
{
  typedef msg::%s %s;
}

#endif'''%(pkgupper, msgupper, pkgupper, msgupper, pkg, msglower, pkg, msg, msg)
    if not os.path.isdir(os.path.dirname(outfile)):
        os.makedirs(os.path.dirname(outfile))
    outf = open(outfile, 'w')
    outf.write(output)
    outf.close()

if __name__ == '__main__':
    if len(sys.argv) != 4:
        print('Expected exactly three arguments')
        sys.exit(1)
    gencpp(sys.argv[1], sys.argv[2], sys.argv[3])
